---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "kibana_alert_rule Resource - terraform-provider-kibana"
subcategory: ""
description: |-
  Sample resource in the Terraform provider AlertRule.
---

# kibana_alert_rule (Resource)

Sample resource in the Terraform provider AlertRule.

## Example Usage

```terraform
resource "kibana_alert_rule" "example" {
  consumer    = "siem"
  enabled     = false
  name        = "As code - new"
  notify_when = "onActiveAlert"
  params = jsonencode(
    {
      author         = []
      description    = "Some alert rule description"
      exceptionsList = []
      falsePositives = []
      filters        = []
      from           = "now-21660s"
      immutable      = false
      index = [
        "someindex-*",
      ]
      language   = "kuery"
      license    = ""
      maxSignals = 100
      meta = {
        from                = "1m"
        kibana_siem_app_url = "https:/yourkibanainstanceurl"
      }
      outputIndex      = ".siem-signals-default"
      query            = "event.statuscode != 200 and somecondition != true"
      references       = []
      riskScore        = 47
      riskScoreMapping = []
      ruleId           = "theruleid" // Unrelated to the rule object id. https://github.com/elastic/kibana/issues/100667
      severity         = "medium"
      severityMapping  = []
      threat           = []
      threshold = {
        cardinality = [
          {
            field = "somefield.keyword"
            value = 3
          },
        ]
        field = [
          "event.user_name.keyword",
        ]
        value = 1
      }
      to      = "now"
      type    = "threshold"
      version = 3
    }
  )
  rule_type_id = "siem.signals"
  schedule = {
    "interval" = "5h"
  }
  tags = ["ok"]
  actions {
    group = "default"
    id    = "407ed770-9cf4-47aa-8840-0b5cdb22496e" // The Id must refer to an existing Action.
    params = jsonencode(
      {
        message = <<-EOT
                    Rule {{context.rule.name}} generated {{state.signals_count}} alerts
                    <{{{context.results_link}}}|Follow on this dashboard>
                EOT
      }
    )
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `consumer` (String) The name of the application that owns the rule. This name has to match the Kibana Feature name, as that dictates the required RBAC privileges.
- `name` (String) A name to reference and search.
- `notify_when` (String) The condition for throttling the notification: onActionGroupChange, onActiveAlert, or onThrottleInterval.
- `params` (String) The parameters to pass to the rule type executor params value. This will also validate against the rule type params validator, if defined.
- `rule_type_id` (String) The ID of the rule type that you want to call when the rule is scheduled to run.
- `schedule` (Map of String) The schedule specifying when this rule should be run, using one of the available schedule formats.

### Optional

- `actions` (Block List) An array of the following action objects. (see [below for nested schema](#nestedblock--actions))
- `enabled` (Boolean) Indicates if you want to run the rule on an interval basis after it is created.
- `id` (String) The ID of this resource.
- `space_id` (String) An identifier for the space. If space_id is not provided in the URL, the default space is used.
- `tags` (List of String) A list of keywords to reference and search.
- `throttle` (String) How often this rule should fire the same actions. This will prevent the rule from sending out the same notification over and over. For example, if a rule with a schedule of 1 minute stays in a triggered state for 90 minutes, setting a throttle of 10m or 1h will prevent it from sending 90 notifications during this period.

<a id="nestedblock--actions"></a>
### Nested Schema for `actions`

Required:

- `group` (String) Grouping actions is recommended for escalations for different types of alerts. If you donâ€™t need this, set this value to default.
- `id` (String) The ID of the connector saved object to execute.
- `params` (String) The map to the params that the connector type will receive. ` params` are handled as Mustache templates and passed a default set of context.

## Import

Import is supported using the following syntax:

```shell
#! /bin/bash

# bb612320-d369-11eb-a349-134881e2edff must refer to an existing rule id in your
# Kibana instance
terraform import kibana_alert_rule.example bb612320-d369-11eb-a349-134881e2edff
```
